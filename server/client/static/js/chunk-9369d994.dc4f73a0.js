(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9369d994"],{a55b:function(e,r,t){"use strict";t.r(r);var n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[e.showLogin?t("div",[t("div",{staticClass:"login_form"},[t("div",{staticClass:"title"},[e._v("社团用户登录")]),t("form",[t("div",[t("van-field",{attrs:{label:"账号：",placeholder:"请输入账号"},model:{value:e.loginForm.username,callback:function(r){e.$set(e.loginForm,"username",r)},expression:"loginForm.username"}})],1),t("div",[t("van-field",{attrs:{label:"密码：",placeholder:"请输入密码",type:"password"},model:{value:e.loginForm.password,callback:function(r){e.$set(e.loginForm,"password",r)},expression:"loginForm.password"}})],1)]),t("div",{staticClass:"login_btns"},[t("button",{on:{click:e.login}},[e._v("登 录")]),t("button",{on:{click:e.goRegister}},[e._v("注 册")]),t("button",{on:{click:function(r){return e.$router.back()}}},[e._v("返 回")])])])]):e._e(),e.showRegister?t("div",[t("div",{staticClass:"login_form"},[t("div",{staticClass:"title"},[e._v("注册社团用户")]),t("form",[t("div",[t("van-field",{attrs:{label:"输入账号：",placeholder:"请设置账号",required:""},model:{value:e.registerForm.username,callback:function(r){e.$set(e.registerForm,"username",r)},expression:"registerForm.username"}})],1),t("div",[t("van-field",{attrs:{label:"输入昵称：",placeholder:"请输入您的昵称",required:""},model:{value:e.registerForm.nickname,callback:function(r){e.$set(e.registerForm,"nickname",r)},expression:"registerForm.nickname"}})],1),t("div",[t("van-field",{attrs:{label:"手机号：",type:"number",placeholder:"请输入您的手机号",required:""},model:{value:e.registerForm.phone,callback:function(r){e.$set(e.registerForm,"phone",r)},expression:"registerForm.phone"}})],1),t("div",[t("van-field",{attrs:{type:"password",label:"设置密码：",placeholder:"请输入密码",required:""},model:{value:e.registerForm.password,callback:function(r){e.$set(e.registerForm,"password",r)},expression:"registerForm.password"}})],1),t("div",[t("van-field",{attrs:{type:"password",label:"确认密码：",placeholder:"请再次输入密码",required:""},model:{value:e.registerForm.newpassword,callback:function(r){e.$set(e.registerForm,"newpassword",r)},expression:"registerForm.newpassword"}})],1)]),t("div",{staticClass:"login_btns"},[t("button",{on:{click:e.confirmRegister}},[e._v(" 确 认 注 册 ")]),t("button",{on:{click:e.goLogin}},[e._v("返 回")])])])]):e._e()])},s=[],a=t("1da1"),o=(t("96cf"),t("d399")),i={data:function(){return{showRegister:!1,showLogin:!0,disabled:!1,codeActive:!1,registerForm:{username:"",nickname:"",phone:"",password:"",newpassword:""},loginForm:{username:"",password:""}}},methods:{handleBack:function(){localStorage.setItem("tabIndex",0),this.$router.push("/gamelist/0")},goRegister:function(){this.showLogin=!1,this.showRegister=!0},goLogin:function(){this.showRegister=!1,this.showLogin=!0},sendCode:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var t,n,s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(""!==e.registerForm.phone){r.next=2;break}return r.abrupt("return",o["a"].fail("请先输入手机号"));case 2:return r.next=4,e.$http.get("/service/gameInfo/send/"+e.registerForm.phone);case 4:t=r.sent,n=t.data,s=59,e.disabled=!0,e.codeActive=!0,e.checkcode="请等待(60)",a=setInterval((function(){s--,e.checkcode="请等待(".concat(s,")"),0===s&&(e.disabled=!1,e.checkcode="发送验证码",e.codeActive=!1,clearTimeout(a))}),1e3),400===n.code&&o["a"].fail("请重试");case 12:case"end":return r.stop()}}),r)})))()},confirmRegister:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var t,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(""!==e.registerForm.username&&""!==e.registerForm.nickname&&""!==e.registerForm.password&&""!==e.registerForm.newpassword){r.next=2;break}return r.abrupt("return",o["a"].fail("请输入必选项"));case 2:if(11===e.registerForm.phone.length){r.next=4;break}return r.abrupt("return",o["a"].fail("手机号格式不正确"));case 4:if(e.registerForm.password===e.registerForm.newpassword){r.next=6;break}return r.abrupt("return",o["a"].fail("两次输入的密码不一致"));case 6:return r.next=8,e.$http.register(e.registerForm);case 8:if(t=r.sent,n=t.data,400!==n.code){r.next=12;break}return r.abrupt("return",o["a"].fail(n.message));case 12:o["a"].success("注册成功，请登录"),e.showRegister=!1,e.showLogin=!0;case 15:case"end":return r.stop()}}),r)})))()},login:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var t,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(""!==e.loginForm.username&&""!==e.loginForm.password){r.next=2;break}return r.abrupt("return",o["a"].fail("请输入必选项"));case 2:return r.next=4,e.$http.login(e.loginForm);case 4:if(t=r.sent,n=t.data,400!==n.code){r.next=8;break}return r.abrupt("return",o["a"].fail(n.message));case 8:Object(o["a"])("登录成功"),console.log(n),e.$store.dispatch("setUser",n),e.$router.push("/mine");case 12:case"end":return r.stop()}}),r)})))()}}},c=i,l=(t("fb86"),t("2877")),u=Object(l["a"])(c,n,s,!1,null,"6038d504",null);r["default"]=u.exports},ea8d:function(e,r,t){},fb86:function(e,r,t){"use strict";t("ea8d")}}]);